[gd_scene load_steps=4 format=3 uid="uid://bjp2bck62tl2m"]

[ext_resource type="Script" path="res://scripts/control_panel/control_panel.gd" id="1_rhl0v"]
[ext_resource type="Script" path="res://scripts/control_panel/obs_websocket_client.gd" id="2_1sf50"]
[ext_resource type="Texture2D" uid="uid://qtjderhjoqbs" path="res://assets/pixel/melba_toast_toast.png" id="2_bkvhp"]

[node name="ControlPanel" type="Window"]
disable_3d = true
title = "Control Panel - Toaster"
initial_position = 1
size = Vector2i(800, 600)
min_size = Vector2i(800, 600)
script = ExtResource("1_rhl0v")

[node name="WebSocketClient" type="Node" parent="."]
script = ExtResource("2_1sf50")
password = "geofEoCx41cwOUOB"

[node name="BackgroundColor" type="ColorRect" parent="."]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(1, 0.603922, 0.541176, 1)

[node name="TextureRect" type="TextureRect" parent="."]
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -170.0
offset_top = -182.0
grow_horizontal = 0
grow_vertical = 0
size_flags_horizontal = 0
texture = ExtResource("2_bkvhp")

[node name="Margins" type="MarginContainer" parent="."]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_constants/margin_left = 5
theme_override_constants/margin_top = 5
theme_override_constants/margin_right = 5
theme_override_constants/margin_bottom = 5

[node name="Columns" type="VBoxContainer" parent="Margins"]
layout_mode = 2

[node name="FirstRow" type="HBoxContainer" parent="Margins/Columns"]
layout_mode = 2
size_flags_vertical = 3

[node name="SpeechBox" type="VBoxContainer" parent="Margins/Columns/FirstRow"]
layout_mode = 2
size_flags_horizontal = 3

[node name="PanelContainer" type="PanelContainer" parent="Margins/Columns/FirstRow/SpeechBox"]
layout_mode = 2
size_flags_vertical = 3

[node name="MarginContainer" type="MarginContainer" parent="Margins/Columns/FirstRow/SpeechBox/PanelContainer"]
layout_mode = 2
theme_override_constants/margin_left = 10
theme_override_constants/margin_top = 10
theme_override_constants/margin_right = 10
theme_override_constants/margin_bottom = 10

[node name="VBoxContainer" type="VBoxContainer" parent="Margins/Columns/FirstRow/SpeechBox/PanelContainer/MarginContainer"]
layout_mode = 2

[node name="Buttons" type="HBoxContainer" parent="Margins/Columns/FirstRow/SpeechBox/PanelContainer/MarginContainer/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 4

[node name="CancelSpeech" type="Button" parent="Margins/Columns/FirstRow/SpeechBox/PanelContainer/MarginContainer/VBoxContainer/Buttons"]
layout_mode = 2
text = "Cancel speech"

[node name="GenerateSpeech" type="Button" parent="Margins/Columns/FirstRow/SpeechBox/PanelContainer/MarginContainer/VBoxContainer/Buttons"]
layout_mode = 2
text = "Generate"

[node name="CurrentSpeech" type="Label" parent="Margins/Columns/FirstRow/SpeechBox/PanelContainer/MarginContainer/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
text = "Let's get toasty! Let's get toasty! Let's get toasty! Let's get toasty! Let's get toasty! Let's get toasty! Let's get toasty! Let's get toasty! Let's get toasty! Let's get toasty! Let's get toasty! Let's get toasty! Let's get toasty! "
horizontal_alignment = 1
autowrap_mode = 2

[node name="PanelContainer2" type="PanelContainer" parent="Margins/Columns/FirstRow/SpeechBox"]
layout_mode = 2

[node name="MarginContainer" type="MarginContainer" parent="Margins/Columns/FirstRow/SpeechBox/PanelContainer2"]
layout_mode = 2
theme_override_constants/margin_left = 10
theme_override_constants/margin_top = 10
theme_override_constants/margin_right = 10
theme_override_constants/margin_bottom = 10

[node name="HBoxContainer" type="HBoxContainer" parent="Margins/Columns/FirstRow/SpeechBox/PanelContainer2/MarginContainer"]
layout_mode = 2

[node name="ObsClientStatus" type="ColorRect" parent="Margins/Columns/FirstRow/SpeechBox/PanelContainer2/MarginContainer/HBoxContainer"]
unique_name_in_owner = true
custom_minimum_size = Vector2(0, 25)
layout_mode = 2
size_flags_horizontal = 3
color = Color(1, 0, 0, 1)

[node name="Label" type="Label" parent="Margins/Columns/FirstRow/SpeechBox/PanelContainer2/MarginContainer/HBoxContainer/ObsClientStatus"]
layout_mode = 0
offset_right = 81.0
offset_bottom = 26.0
theme_override_colors/font_shadow_color = Color(0, 0, 0, 1)
text = "OBS Client"

[node name="BackendStatus" type="ColorRect" parent="Margins/Columns/FirstRow/SpeechBox/PanelContainer2/MarginContainer/HBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
color = Color(1, 0, 0, 1)

[node name="Label" type="Label" parent="Margins/Columns/FirstRow/SpeechBox/PanelContainer2/MarginContainer/HBoxContainer/BackendStatus"]
theme_override_colors/font_shadow_color = Color(0, 0, 0, 1)
text = "Backend"
horizontal_alignment = 1
vertical_alignment = 1

[node name="ObsControls" type="VBoxContainer" parent="Margins/Columns/FirstRow"]
layout_mode = 2
size_flags_horizontal = 3

[node name="PanelContainer" type="PanelContainer" parent="Margins/Columns/FirstRow/ObsControls"]
layout_mode = 2
size_flags_vertical = 3

[node name="MarginContainer" type="MarginContainer" parent="Margins/Columns/FirstRow/ObsControls/PanelContainer"]
layout_mode = 2
theme_override_constants/margin_left = 10
theme_override_constants/margin_top = 10
theme_override_constants/margin_right = 10
theme_override_constants/margin_bottom = 10

[node name="VBoxContainer" type="VBoxContainer" parent="Margins/Columns/FirstRow/ObsControls/PanelContainer/MarginContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="ObsStreamControl" type="Button" parent="Margins/Columns/FirstRow/ObsControls/PanelContainer/MarginContainer/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
theme_type_variation = &"1"
toggle_mode = true
keep_pressed_outside = true
text = "Start Stream"

[node name="ScenesLabel" type="Label" parent="Margins/Columns/FirstRow/ObsControls/PanelContainer/MarginContainer/VBoxContainer"]
layout_mode = 2
text = "Scenes"
horizontal_alignment = 1

[node name="ObsScenes" type="HFlowContainer" parent="Margins/Columns/FirstRow/ObsControls/PanelContainer/MarginContainer/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2

[node name="Button" type="Button" parent="Margins/Columns/FirstRow/ObsControls/PanelContainer/MarginContainer/VBoxContainer/ObsScenes"]
layout_mode = 2
text = "TestTestTestTestTestTestTestTestTe"

[node name="Button2" type="Button" parent="Margins/Columns/FirstRow/ObsControls/PanelContainer/MarginContainer/VBoxContainer/ObsScenes"]
layout_mode = 2
text = "Test"

[node name="Button3" type="Button" parent="Margins/Columns/FirstRow/ObsControls/PanelContainer/MarginContainer/VBoxContainer/ObsScenes"]
layout_mode = 2
text = "Test"

[node name="Button4" type="Button" parent="Margins/Columns/FirstRow/ObsControls/PanelContainer/MarginContainer/VBoxContainer/ObsScenes"]
layout_mode = 2
text = "Test"

[node name="Button5" type="Button" parent="Margins/Columns/FirstRow/ObsControls/PanelContainer/MarginContainer/VBoxContainer/ObsScenes"]
layout_mode = 2
text = "Test"

[node name="InputsLabel" type="Label" parent="Margins/Columns/FirstRow/ObsControls/PanelContainer/MarginContainer/VBoxContainer"]
layout_mode = 2
text = "Inputs"
horizontal_alignment = 1

[node name="ObsInputs" type="HFlowContainer" parent="Margins/Columns/FirstRow/ObsControls/PanelContainer/MarginContainer/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_vertical = 3

[node name="Button" type="Button" parent="Margins/Columns/FirstRow/ObsControls/PanelContainer/MarginContainer/VBoxContainer/ObsInputs"]
layout_mode = 2
text = "TestTestTestTestTestTestTestTestTe"

[node name="Button2" type="Button" parent="Margins/Columns/FirstRow/ObsControls/PanelContainer/MarginContainer/VBoxContainer/ObsInputs"]
layout_mode = 2
text = "Test"

[node name="Button3" type="Button" parent="Margins/Columns/FirstRow/ObsControls/PanelContainer/MarginContainer/VBoxContainer/ObsInputs"]
layout_mode = 2
text = "Test"

[node name="Button4" type="Button" parent="Margins/Columns/FirstRow/ObsControls/PanelContainer/MarginContainer/VBoxContainer/ObsInputs"]
layout_mode = 2
text = "Test"

[node name="Button5" type="Button" parent="Margins/Columns/FirstRow/ObsControls/PanelContainer/MarginContainer/VBoxContainer/ObsInputs"]
layout_mode = 2
text = "Test"

[node name="ReconnectButton" type="Button" parent="Margins/Columns/FirstRow/ObsControls/PanelContainer/MarginContainer/VBoxContainer"]
layout_mode = 2
text = "Reconnect"

[node name="SecondRow" type="HBoxContainer" parent="Margins/Columns"]
layout_mode = 2
size_flags_vertical = 3

[node name="PanelContainer" type="PanelContainer" parent="Margins/Columns/SecondRow"]
layout_mode = 2
size_flags_horizontal = 3

[node name="MarginContainer" type="MarginContainer" parent="Margins/Columns/SecondRow/PanelContainer"]
layout_mode = 2
theme_override_constants/margin_left = 10
theme_override_constants/margin_top = 10
theme_override_constants/margin_right = 10
theme_override_constants/margin_bottom = 10

[node name="StreamStats" type="RichTextLabel" parent="Margins/Columns/SecondRow/PanelContainer/MarginContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
bbcode_enabled = true
text = "Waiting for data..."

[node name="PanelContainer2" type="PanelContainer" parent="Margins/Columns/SecondRow"]
layout_mode = 2
size_flags_horizontal = 3

[node name="MarginContainer" type="MarginContainer" parent="Margins/Columns/SecondRow/PanelContainer2"]
layout_mode = 2
theme_override_constants/margin_left = 10
theme_override_constants/margin_top = 10
theme_override_constants/margin_right = 10
theme_override_constants/margin_bottom = 10

[node name="StreamStatus" type="RichTextLabel" parent="Margins/Columns/SecondRow/PanelContainer2/MarginContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
bbcode_enabled = true
text = "Waiting for data..."

[node name="CloseConfirm" type="ConfirmationDialog" parent="."]
initial_position = 4
size = Vector2i(324, 109)
unresizable = true
always_on_top = true
transparent = true
ok_button_text = "Yes"
dialog_hide_on_ok = false
cancel_button_text = "No"

[node name="Label" type="Label" parent="CloseConfirm"]
offset_left = 8.0
offset_top = 8.0
offset_right = 316.0
offset_bottom = 60.0
text = "Do you really want to close the Toaster?
;("
horizontal_alignment = 1
vertical_alignment = 1

[node name="StatusTimer" type="Timer" parent="."]

[node name="StatsTimer" type="Timer" parent="."]

[connection signal="close_requested" from="." to="." method="_on_close_requested"]
[connection signal="pressed" from="Margins/Columns/FirstRow/ObsControls/PanelContainer/MarginContainer/VBoxContainer/ObsStreamControl" to="." method="_on_obs_stream_control_pressed"]
[connection signal="pressed" from="Margins/Columns/FirstRow/ObsControls/PanelContainer/MarginContainer/VBoxContainer/ReconnectButton" to="." method="_on_reconnect_button_pressed"]
[connection signal="confirmed" from="CloseConfirm" to="." method="_on_close_confirm_confirmed"]
[connection signal="timeout" from="StatusTimer" to="." method="_on_status_timer_timeout"]
[connection signal="timeout" from="StatsTimer" to="." method="_on_stats_timer_timeout"]
